<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--link rel="icon" href="%PUBLIC_URL%/favicon.ico" /-->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
    <script src="//code.jquery.com/jquery-migrate-1.0.0.js"></script>
    <script type="text/javascript" src="//malsup.github.io/jquery.corner.js"> </script>
    <script src='//hammerjs.github.io/dist/hammer.min.js'> </script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <!--link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" /-->
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <!-- link rel="manifest" href="%PUBLIC_URL%/manifest.json" /-->
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>PyeongChang Tour AR</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <script>
      window.os = 'ETC';
      if (window.navigator.userAgent.includes('Android')) {
        window.os = 'AND';
      }
      else if (window.navigator.userAgent.includes('iPhone')) {
        window.os = 'IOS';
      }
      window.appName = 'PyeongChangARTour';
    </script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=cdaef4ec85586dd60e99e2a20dcd29b5&libraries=services,clusterer"></script>
    <script>
      var geocoder = new kakao.maps.services.Geocoder();
      function getWcongnamul(x, y) {
        var latlng = new kakao.maps.LatLng(y, x);
        return latlng.toCoords().toString();
      };

      function testMyPosition(){
        getCurrentAddress((result) => {
          console.log(result);
          if (result && result[0]) {
            console.log(result[0].address.address_name);
          }
        })
      }

      function getCurrentAddress(callback){
        if('geolocation' in navigator) {
          navigator.geolocation.getCurrentPosition((position) => {
            if (callback) {
              //searchAddrFromCoords(position.coords.latitude, position.coords.longitude, callback);
              searchDetailAddrFromCoords(position.coords.latitude, position.coords.longitude, callback);
            }
          });
        } else {
          /* 위치정보 사용 불가능 */
          if (callback){
            callback();
          }
        }
      };
      
      function searchAddrFromCoords(lat, lng, callback) {
          // 좌표로 행정동 주소 정보를 요청합니다
          geocoder.coord2RegionCode(lng, lat, callback);         
      }

      function searchDetailAddrFromCoords(lat, lng, callback) {
          //console.log(`좌표로 법정동 상세 주소 정보를 요청합니다. (${lat}, ${lng})` );
          // 좌표로 법정동 상세 주소 정보를 요청합니다
          console.log(geocoder);
          geocoder.coord2Address(lng, lat, (result) => {
            if (result && result[0] && callback) {
              callback(result[0].address.address_name);
            }
          });
          
      }
      
      function initHammer() {
        if (!window.mc) {
          var element = document.getElementById('dv-body'); 
          if (element) {
            var mc = new Hammer(element);
            mc.get('swipe').set({ direction: Hammer.DIRECTION_HORIZONTAL });
            window.mc = mc;
          }
        }
      }

      function setSwipeCallBack(left, right) {
        mc = window.mc;
        if (!mc) {
          initHammer();
        }
        if (mc) {
          mc.on('swipeleft', (obj) => {
            if (left) {
              left(obj.distance);
            }
          });
          
          mc.on('swiperight', (obj) => {
            if (right) {
              right(obj.distance);
            }
          });
        }
      }


      /*
      var geocoder = new kakao.maps.services.Geocoder(),
        wtmX = 160082.538257218,
        wtmY = -4680.975749087054;
        
      var callback = function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          console.log(result[0].x); // 126.570667
          console.log(result[0].y); // 33.45070100000001
        }
      };
      
      geocoder.transCoord(wtmX, wtmY, callback, {
        input_coord: kakao.maps.services.Coords.WTM,
        output_coord: kakao.maps.services.Coords.WGS84
      });*/
    </script>
    <div id="root"></div>
  </body>
</html>
